- ignore: JUST TO SET SLADesh
  desh: &SLADesh | 
    # a variable (like channel) can return several values like transport_type can return [ship, barge] or [train, freight train]
    - domestic_transfer: 
        - yes:
            - channel: 
                - desh-trans.nl:
                    - transport_type: ship
                      service_paid_date:
                        - isBetween: [2018-12-09, '2018-12-17 21:59:59']
                    #else
                    - transport_type: 
                        - notEquals: ship
                      service_paid_date:
                        - isBetween: [2018-12-09, '2018-12-18 21:59:59']
              decide: '2018-12-24'
            
            - transport_type:
                - equalsAny:
                    - ship
                    - train
                  then:
                    channel: 
                      - [swedesh.se, desh-trans.fr]:
                          service_paid_date:
                            - isBetween: [2018-12-09, '2018-12-10 21:59:59']
                      - tradesh.no:
                          service_paid_date:
                            - isBetween: [2018-12-09, '2018-12-12 21:59:59']
                      - desh-trans.be:
                          service_paid_date:
                            - isBetween: [2018-12-10, '2018-12-14 21:59:59']
                      - [deshtra.co.uk, desh-trans.de]:
                          service_paid_date:
                            - isBetween: [2018-12-09, '2018-12-13 21:59:59']
                    decide: '2018-12-24'
                #- else:
                - isBetween: ['AA','zz']
                  then:
                    channel: 
                      - [swedesh.se, desh-trans.fr]:
                          service_paid_date:
                            - isBetween: [2018-12-09, '2018-12-11 21:59:59']
                      - tradesh.no:
                          service_paid_date:
                            - isBetween: [2018-12-09, '2018-12-13 21:59:59']
                      - [deshtra.co.uk, desh-trans.de, desh-trans.be]:
                          service_paid_date:
                            - isBetween: [2018-12-09, '2018-12-16 21:59:59']
                    decide: '2018-12-24'
    - transport_type: ship
      channel:
        - contains: inter
          then:
            destination_country:
              - [DE, UK, FR, IT, ES]:
                  service_paid_date:
                    - isBetween: [2018-12-09, '2018-12-09 21:59:59']
              - [NL, BE]:
                  service_paid_date:
                    - isBetween: [2018-12-09, '2018-12-13 21:59:59']
              - [NO, SE]:
                  service_paid_date:
                    - isBetween: [2018-12-01, '2018-12-06 21:59:59']
            decide: '2018-12-21'
                  
    - transport_type: ship
      channel:
        - contains: export
          then:
            destination_country:
              - [US, CA, AU, NZ]:
                  service_paid_date:
                    - isBetween: [2018-12-01, '2018-12-02 21:59:59']
                  decide: '2018-12-23'
              - [NL, DE, UK]:
                  service_paid_date:
                    - isBetween: [2018-12-09, '2018-12-14 21:59:59']
              - BE:
                  service_paid_date:
                    - isBetween: [2018-12-09, '2018-12-17 21:59:59']
              - FR:
                  service_paid_date:
                    - isBetween: [2018-12-09, '2018-12-10 21:59:59']
              - SE:
                  service_paid_date:
                    - isBetween: [2018-12-09, '2018-12-09 21:59:59']
              - NO:
                  service_paid_date:
                    - isBetween: [2018-12-01, '2018-12-06 21:59:59']
            decide: '2018-12-24'
- { desh: *SLADesh, vars: {service_paid_date: "2018-12-17 14:12:33", transport_type:  ship, domestic_transfer: yes, channel: desh-trans.nl}, expected: 2018-12-24, name: value-ExpressionTree test }
- { desh: *SLADesh, vars: {service_paid_date: "2018-12-17 14:12:33", transport_type: train, domestic_transfer: yes, channel: desh-trans.nl}, expected: 2018-12-24, name: else test }
- { desh: *SLADesh, vars: {service_paid_date: "2018-12-18 14:12:33", transport_type: train, domestic_transfer: yes, channel: desh-trans.nl}, expected: 2018-12-24 }
- { desh: *SLADesh, vars: {service_paid_date: "2018-12-18 14:12:33", transport_type:  ship, domestic_transfer: yes, channel: desh-trans.nl}, expected: null }
